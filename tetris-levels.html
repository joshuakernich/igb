<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Tetris Levels</title>
	<script type="text/javascript" src="jq.js"></script>
	<script type="text/javascript">
		$(function(){

			let colors = {
				J:'blue',
				L:'orange',
				T:'purple',
				Z:'red',
				S:'limegreen',
				I:'cyan',
				O:'yellow',

				apple:'red',
				watermelon:'pink',
				banana:'yellow',
				banana2:'yellow',
				pear:'green',
				pear2:'green',
				grapes:'purple',

				boot:'brown',
				boot2:'brown',
				scarf:'#dd7777',
				scarf2:'#dd7777',
				vest:'beige',
				dress:'#77dd77',
				sock:'lightgray',
				sock2:'lightgray',
				trousers:'#7777dd',

				mattress:'beige',
				couch:'#7777dd',
				couch2:'#7777dd',
				boxes:'#997755',
				boxes2:'#997755',
				box:'#997755',
				box2:'#997755',
				box3:'#997755',
				box4:'#997755',
				washing:'lightgray',
				fridge:'lightgray',
				duffel:'gray',
				piano:'#333',

				lettuce:'#77dd77',
				cheese:'#ffdd00',
				burger:'brown',
				buntop:'#dd9955',
				bunbottom:'#dd9955',
				onion:'pink',
				bacon:'#dd7777',
				pickle:'green',
				mushroom:'beige',
				tomato:'red',
			}

			let standard = {
				J:'01,01,11',
				L:'10,10,11',
				T:'111,010',
				Z:'110,011',
				S:'011,110',
				I:'1,1,1,1',
				O:'11,11',
			}

			let smoothie = {
				pear:'01,01,11',
				pear2:'10,10,11',
				grapes:'111,010',
				banana:'10,11,01',
				banana2:'01,11,10',
				watermelon:'1,1,1,1',
				apple:'11,11',
			}

			let wardrobe = {
				
				dress:'1,1,1,1',
				boot:'10,10,11',
				boot2:'01,01,11',
				scarf:'10,11,01',
				scarf2:'01,11,10',
				vest:'11,11',
				trousers:'111,101,100',
				sock:'1,1',
				sock2:'1,1',
			}

			let truck = {
				
				mattress:'1,1,1,1',
				couch:'100,111',
				couch2:'001,111',
				boxes:'011,110',
				boxes2:'110,011',
				washing:'11,11',
				duffel:'010,111',
				fridge:'11,11,11',
				piano:'1111,1001',
				box:'1',
				box2:'1',
				box3:'1',
				box4:'1',
			}

			let burger = {
				burger:'1111',
				lettuce:'100,111',
				cheese:'111,001',
				pickle:'001,111',
				mushroom:'111,010',
				bacon:'110,011',
				onion:'011,110',
				tomato:'11,11',
				
			}

			let buns = {
				buntop:'1111',
				bunbottom:'1111',
			}

			let marathon = [
				'000000n00,000n00000,0000000n0',
				'00n000000,0n00000n0,0000n0000,00n000n00',
				'0000n0000,000000n0n,00n000000,0n000n000,0000000n0',
			]

			let jigsaw = [
			    "1234,1234,1234,1234",
			    "1111,2222,3333,4444",
			    "1122,1122,3344,3344",
			    "3111,3312,3422,4442",
			    "1113,2213,2433,2444",
			    "4433,4213,4213,2211",
			    "3311,3114,3224,2244",
			    "1114,3214,3224,3324",
			    "1133,2113,2223,4444",
			    "3444,3324,3122,1112",
			    "1124,1124,3224,3334",
			    "3311,3221,3221,4444"
			]

			let bridge = [
				{w:6,l:3,r:3,pylons:[],heights:[]},
				{w:12,l:7,r:7,pylons:[],heights:[]},
				{w:17,l:5,r:5,pylons:[8],heights:[4]},
				{w:17,l:5,r:13,pylons:[8],heights:[7]},
				{w:21,l:6,r:6,pylons:[6,14],heights:[3,3]},
				{w:26,l:5,r:17,pylons:[8,17],heights:[2,5]},
				{w:26,l:20,r:20,pylons:[13],heights:[6]},
				
			]

			let burgers = [
				{d:2,cnt:2},
				{d:2,cnt:3},
				{d:2,cnt:4},
				{d:3,cnt:3},
				{d:3,cnt:6},
				{d:2,cnt:8},
				{d:4,cnt:4},
				{d:4,cnt:6},
				{d:5,cnt:5},
				{d:5,cnt:7},
				{d:7,cnt:7},
			]

			let recipegrades = [

				{
					'Double Trouble':{'burger':2},
					'Mini Cheese': {'burger':1,'cheese':1},
					'Mini Bacon':{'burger':1,'bacon':1},
					'Mini Mushroom':{'mushroom':1,'cheese':1},
					'I Got a Pickle':{'burger':1,'pickle':1},
					'Just Greens':{'lettuce':1,'pickle':1},
				},
				{
					'The Stack':{'burger':4},
					'Bad Breath':{'burger':1,'onions':2},
					'Double Cheese':{'burger':1,'cheese':2},
					'Mushroom Bomb':{'mushroom':2,'bacon':1},
					'Grease Lovers':{'burger':1,'bacon':2},
					'Worse Breath':{'burger':1,'onions':3},
				},
				{
					'BLT':{'bacon':1,'lettuce':1,'tomato':1},
					'Triple Cheese':{'burger':3,'cheese':3},
					'Regrets':{'cheese':2,'onion':3},
					'Weedwacker':{'pickle':1,'onion':1,'lettuce':1},
					'Shroomville':{'burger':1,'mushroom':4},
					'Tomato Festival':{'burger':1,'tomato':4},
				},
				{
					'To the Moon':{'burger':8},
					'Death by Tomato':{'tomato':8},
					'Death by Shrooms':{'mushroom':8},
					'Death by Pickles':{'pickle':8},
					'Death by Cheese':{'cheese':8},
					'Death by Onion':{'onion':8},
				},
				{
					'Toxic Breath':{'burger':1,'pickle':1,'onions':3},
					'The Classic': {'burger':1,'cheese':1,'pickle':1,'onion':1},
					'Mushroom Party':{'mushroom':3,'pickle':1,'cheese':2},
					'No Regrets':{'burger':2,'bacon':2,'cheese':2},
					'Hold the Onion':{'burger':1,'cheese':1,'pickle':1,'tomato':1},
					'Great Wall of Greens':{'lettuce':4,'pickle':4},
				},
				{
					'Back to Basics':{'burger':2,'cheese':2},
				},
				{
					'Vegan Party':{'lettuce':1,'tomato':1,'onion':1,'pickle':1,'mushroom':1},
					'Tomato Party':{'burger':1,'tomato':3,'onion':1,'pickle':1},
					'Hypercheese':{'burger':4,'cheese':4,'pickle':1},
				},
				{
					
					'The Lot':{'burger':1,'bacon':1,'lettuce':1,'tomato':1,'onion':1,'pickle':1,'mushroom':1},
				}
			]

			let palettes = [

				['#00ff00','#00d16f','#bbff00','#FFff00','#ffc700','#ffd760'], //greens and yellows
				['#FF0000','#bf0085','#ff6d6d','#ff00ff','#d400ff','#ff5eff'], //reds and pinks
				['#0000ff','#3b3e9b','#007fff','#00FFFF','#00e29e','#5be9ff'], //blues and cyans
				['#FFff00','#ffc700','#ffd760','#FF6A00','#e03f00','#ffa100'], //yellows and oranges
				['#00ff00','#00d16f','#bbff00','#00FFFF','#00e29e','#5be9ff'], //greens and cyans

				['#FF0000','#bf0085','#ff6d6d'], //reds
				['#ff00ff','#d400ff','#ff5eff'], //pinks
				['#00ff00','#00d16f','#bbff00'], //greens
				['#0000ff','#3b3e9b','#007fff'], //blues
				['#FF6A00','#e03f00','#ffa100'], //oranges
				['#FFff00','#ffc700','#ffd760'], //yellows
				['#00FFFF','#00e29e','#5be9ff'], //cyans

			]

			let dome = [1,2,3,4,5,6,7,6,5,4,3,2,1];

			function switchPlayers(iPuzzle,a,b){
				jigsaw[iPuzzle] = jigsaw[iPuzzle].replaceAll(a,'a').replaceAll(b,'b').replaceAll('b',a).replaceAll('a',b);
			}

			/*for(var b in burgers){

				let diversity = burgers[b].d;
				let count = burgers[b].cnt;

				let $li = $('<li>').appendTo('.burgers').text(diversity + ' ingredients stacked '+count+' high');
				let $ul = $('<ul>').appendTo($li);

			}*/

			for(var g in recipegrades){
				let recipes = recipegrades[g];


				let $li = $('<li>').appendTo('.burgers');
				let $ul = $('<ul>').appendTo($li);

				for(var r in recipes){

					let d = [];
					let stack = 0;
					for(var n in recipes[r]){
						d.push( recipes[r][n] + ' ' + n );
						stack += recipes[r][n];
					}

					let $li = $('<li>').appendTo($ul).html(r + ' ( ' +d.join(', ')+' )' + ' difficulty = '+ (d.length * stack));
				}
			}
			

			/*switchPlayers(3,'2','4')
			switchPlayers(5,'3','4')
			switchPlayers(6,'1','3')
			switchPlayers(6,'2','4')
			switchPlayers(7,'2','3')
			switchPlayers(9,'1','3')
			switchPlayers(9,'2','4')
			switchPlayers(10,'1','4')
			switchPlayers(10,'2','3')
			switchPlayers(11,'2','3')
			switchPlayers(11,'4','1')*/




			function drawBlock(container,map,color,label) {
				let $b = $('<block>').appendTo(container);
				for(var n in map){
					if(map[n] == ',') $('<br>').appendTo($b);
					else $('<mino>').appendTo($b).attr('n',map[n]).css({background:color})
				}
				$('<label>').appendTo($b).text(label);
			}

			function drawCollection(container,collection){
				for(var n in collection) drawBlock(container,collection[n],colors[n],n);
			}

			drawCollection('.standard',standard);
			drawCollection('.smoothie',smoothie);
			drawCollection('.wardrobe',wardrobe);
			drawCollection('.truck',truck);
			drawCollection('.burger',burger);
			drawCollection('.burger',buns);

			function drawPuzzle(container,map,omit){

				let $b = $('<block>').appendTo(container);
				for(var n in map){
					if(map[n] == ',') $('<br>').appendTo($b);
					else $('<mino>').appendTo($b).attr('p',(omit.indexOf(map[n]) > -1)?0:map[n]);
				}
			}

			drawPuzzle('.mar-1',marathon[0],[]);
			drawPuzzle('.mar-2',marathon[1],[]);
			drawPuzzle('.mar-3',marathon[2],[]);

			$('<h2>4 player</h2>').appendTo('.jigsaw');
			for(var i in jigsaw ) drawPuzzle('.jigsaw',jigsaw[i],[]);
			$('<h2>3 player</h2>').appendTo('.jigsaw');
			$('<p>Same puzzles, but omitting player 4 (yellow).</p>').appendTo('.jigsaw');

			for(var i in jigsaw ) drawPuzzle('.jigsaw',jigsaw[i],['4']);
			$('<h2>2 player</h2>').appendTo('.jigsaw');
			$('<p>Same puzzles, but omitting players 3 (green) and 4 (yellow).</p>').appendTo('.jigsaw');
			$('<p>For 2 player, blocks should also appear at random rotations with a marathon-style rotation mechanic.</p>').appendTo('.jigsaw');
			for(var i in jigsaw ) drawPuzzle('.jigsaw',jigsaw[i],['3','4']);

			function drawBridge(container,spec){

				let $li = $('<li>').appendTo(container);
				let $b = $('<block class="bridge">').appendTo($li);
				let h = 23;
				for(var y = 0; y <= h; y++){

					for(var x = -2; x < spec.w + 2; x++){

						let p = 'n';
						if(x < 0 && y >= (h-spec.l)) p = '0';
						if(x >= spec.w && y >= (h-spec.r)) p = '0';

						let iPylon = spec.pylons.indexOf(x);

						if( iPylon > -1 && y >= (h-spec.heights[iPylon])) p = '0'

						if(y>=h) p = '2';

						$('<mino>').appendTo($b).attr('p',p);
					}
					$('<br>').appendTo($b);
				}

				$('<label>').appendTo($b).text('width('+spec.w+') left('+spec.l+') right('+spec.r+') pylons('+spec.pylons+') at heights('+spec.heights+')');
			}


			for(var b in bridge ) drawBridge('.bridges',bridge[b])

			
			function drawPalette($el,p){
				let $p = $('<palette>').appendTo($el);
				for(var n in p){
					$('<swatch>').appendTo($p).css({'background':p[n]})
				}
			}

			for(var d in dome){
				let $li = $('<li>').appendTo('.dome').text(dome[d] + ' holes');
				drawPalette($li,palettes[d]);
			}
		});
	</script>
	<style type="text/css">

		.burgers ul{
			margin-bottom: 1em;
		}

		label{
			position: absolute;
			top: -10px;
			left: 0px;
			right: 0px;
			text-align: center;
			display: block;
			font-size: 10px;
		}
		blocks{
			display: block;
		}
		body{
			font-family: sans-serif;
			color: #333;
			max-width: 1000px;
			margin: auto;
			background: gray;
		}

		palette{
			display: inline-block;
			margin-left: 10px;
		}

		swatch{
			display: inline-block;
			width: 15px;
			height: 15px;
		}

		stream{
			background: white;
			padding: 50px;
			display: block;
		}

		block{
			display: inline-block;
			white-space: nowrap;
			line-height: 0px;
			margin: 20px;
			position: relative;
		}

		mino{
			display: inline-block;
			width: 20px;
			height: 20px;
			background: blue;
			box-sizing: border-box;
			border: 1px solid rgba(0,0,0,0.2);
			border-left: 1px solid rgba(255,255,255,0.2);
			border-top: 1px solid rgba(255,255,255,0.2);
			border-radius: 5px;
		}

		mino[n='0']{
			opacity: 0;

		}

		mino[p='0']{
			background: lightgray;
		}

		mino[p='n']{
			opacity: 0;
		}

		mino[p='1']{ background: red; }
		mino[p='2']{ background: blue; }
		mino[p='3']{ background: green; }
		mino[p='4']{ background: orange; }

		h1{
			border-top: 1px solid black;
			padding-top: 20px;
		}

		.bridge{
			border-top: 4px dashed red;
			border-left: 1px dashed red;
			border-right: 1px dashed red;
		}
	</style>
</head>
<body>
	<stream>
		
		<h1>Marathon</h1>
		<h2>Bag</h2>
		<blocks class='standard'></blocks>
		<p>Standard Tetriminos</p>
		<p>Random Rotations</p>
		<h2>Levels</h2>
		<p>Each player gets a turn on each on these level-types before continuing.</p>
		<ol>
			<li>
				<b>1 Player - Clear 3 lines</b><br>3 random lines<br>(single gap in each)
				<blocks class='mar-1'></blocks>
			</li>
			<li>
				<b>2 Players - Clear 4 lines</b><br>4 random lines<br>(alternating 1 or 2 gaps)
				<blocks class='mar-2'></blocks>
			</li>
			<li>
				<b>2 players - Clear 5 lines</b><br>5 random lines<br>(alternating 1 or 2 gaps)
				<blocks class='mar-3'></blocks>
			</li>
			<li>
				Continue adding more lines (alternating 1 or 2 gaps)
			</li>
		</ol>
		
		<h1>Packing</h1>
		<h2>Bag</h2>
		<p>Rigged Bags (as below) delivered in random order. Renew bag when emptied.</p>
		<p>No Rotations (deliver all blocks unrotated)</p>
		<h2>Levels</h2>
		<ol>
			<li>
				Smoothie (7 x 13 matrix)
				<blocks class='smoothie'></blocks>
			</li>
			<li>
				Wardrobe (10 x 10 matrix)
				<blocks class='wardrobe'></blocks>
			</li>
			<li>
				Moving Truck (14 x 10 matrix)
				<blocks class='truck'></blocks>
			</li>
		</ol>
		<h1>Jigsaw</h1>
		<blocks class='jigsaw'></blocks>
		<h1>Stacking</h1>
		<h2>Bag</h2>
		<blocks class='burger'></blocks>
		<p>Only deliver ingredients relevant to current recipes</p>
		<p>No rotations (deliver all blocks unrotated)</p>
		<h2>Levels</h2>

		<p>Each player must complete one (or two) recipes from each level before moving to the next list.</p>
		<ol class="burgers">
			
		</ol>
		

		<h1>Bridge</h1>
		<h2>Bag</h2>
		<p>Standard Tetriminos</p>
		<p>Random Rotations</p>
		<h2>Levels</h2>
		<p>Assuming a nominal height of 10 blocks to the waterline</p>
		<ol class="bridges">
			
		</ol>
		<h1>Dome</h1>
		<p>Standard Tetriminos (Always show the 7 standard blocks)</p>
		<p>Random Rotations</p>

		<h2>Levels</h2>
		<p>Randomly scatter the holes across the breadth of the dome.</p>
		<p>Allow 1.5 seconds worth of rejection time per hole. (e.g. 5 holes is 5 x 1.5 = 7.5 seconds)</p>
		<ol class="dome">
			
			
		</ol>
	</stream>
</body>
</html>